"use strict";(self.webpackChunkdocsite=self.webpackChunkdocsite||[]).push([[4783],{1834:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>i});var c=t(4848),a=t(8453);const s={},l="okctl",o={id:"cli/quickstart",title:"okctl",description:"okctl is a powerful command line interface (CLI) tool compatible with ob-operator",source:"@site/docs/cli/quickstart.md",sourceDirName:"cli",slug:"/cli/quickstart",permalink:"/ob-operator/docs/cli/quickstart",draft:!1,unlisted:!1,editUrl:"https://github.com/oceanbase/ob-operator/tree/master/docsite/docs/cli/quickstart.md",tags:[],version:"current",frontMatter:{}},r={},i=[{value:"Install okctl",id:"install-okctl",level:2},{value:"Build okctl from source code",id:"build-okctl-from-source-code",level:3},{value:"Use okctl with examples",id:"use-okctl-with-examples",level:2},{value:"Interactive command",id:"interactive-command",level:3},{value:"Cluster management",id:"cluster-management",level:3},{value:"Tenant management",id:"tenant-management",level:3},{value:"Backup policy management",id:"backup-policy-management",level:3},{value:"Component Installation and update",id:"component-installation-and-update",level:3},{value:"Others",id:"others",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.h1,{id:"okctl",children:"okctl"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"=============================================\n          _             _     _ \n   ___   | | __   ___  | |_  | |\n  / _ \\  | |/ /  / __| | __| | |\n | (_) | |   <  | (__  | |_  | |\n  \\___/  |_|\\_\\  \\___|  \\__| |_|\n\n=============================================\nA Command Line Tool compatible with OceanBase Operator\n"})}),"\n",(0,c.jsxs)(n.p,{children:["okctl is a powerful command line interface (CLI) tool compatible with ",(0,c.jsx)(n.a,{href:"https://github.com/oceanbase/ob-operator/blob/master/README.md",children:"ob-operator"})]}),"\n",(0,c.jsx)(n.p,{children:"okctl has the following features:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Cluster management, including creating, deleting, scaling, upgrading, etc."}),"\n",(0,c.jsx)(n.li,{children:"Tenant management, including creating, updating, activating standby tenant, switchover of tenants, etc."}),"\n",(0,c.jsx)(n.li,{children:"Backup policy management, including creating, resuming, pausing, etc."}),"\n",(0,c.jsx)(n.li,{children:"Component installation and update, support ob-operator, ob-dashboard, cert-manager, local-path-provisioner."}),"\n",(0,c.jsx)(n.li,{children:"Interactive command for user to deploy a ob cluster and tenant easily."}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"install-okctl",children:"Install okctl"}),"\n",(0,c.jsx)(n.p,{children:"Currently okctl is not released, you can build it from source code."}),"\n",(0,c.jsx)(n.h3,{id:"build-okctl-from-source-code",children:"Build okctl from source code"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"make okctl\n"})}),"\n",(0,c.jsxs)(n.p,{children:["If build successfully, you can find the binary file in ",(0,c.jsx)(n.code,{children:"./bin/okctl"}),", you can copy it to your ",(0,c.jsx)(n.code,{children:"PATH"})," by the following command."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:'# using bash as example\necho "export PATH=$PATH:/path/to/okctl" >> ~/.bashrc\nsource ~/.bashrc\n'})}),"\n",(0,c.jsxs)(n.p,{children:["Assuming you have added it to your ",(0,c.jsx)(n.code,{children:"PATH"}),", you can run the following command to check if okctl is installed successfully."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"okctl -v\n"})}),"\n",(0,c.jsx)(n.p,{children:"If install successfully, you will see the output like this:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"OceanBase Operator Cli:\n Version:    0.1.0\n OS/Arch:    linux/amd64\n Go Version: go1.22.5\n Git Commit: 7074c066\n Build:      2024-12-18 16:22:11\n\n"})}),"\n",(0,c.jsx)(n.h2,{id:"use-okctl-with-examples",children:"Use okctl with examples"}),"\n",(0,c.jsx)(n.h3,{id:"interactive-command",children:"Interactive command"}),"\n",(0,c.jsxs)(n.p,{children:["Deploy an OceanBase cluster and correspond tenant easily using ",(0,c.jsx)(n.code,{children:"demo"})," command, currently support single node cluster and 1-1-1 three node cluster."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"okctl demo\n"})}),"\n",(0,c.jsx)(n.h3,{id:"cluster-management",children:"Cluster management"}),"\n",(0,c.jsxs)(n.p,{children:["Create an OceanBase cluster named ",(0,c.jsx)(n.code,{children:"test"})," in default namespace with 1 zone."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"okctl cluster create test --zones=z1=1\n"})}),"\n",(0,c.jsx)(n.p,{children:"List all clusters in default namespace."}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"okctl cluster list\n"})}),"\n",(0,c.jsxs)(n.p,{children:["Add two zones ",(0,c.jsx)(n.code,{children:"z2"}),", ",(0,c.jsx)(n.code,{children:"z3"})," with replica 1 to the cluster ",(0,c.jsx)(n.code,{children:"test"})]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"okctl cluster scale test --zones=z2=1,z3=1\n"})}),"\n",(0,c.jsxs)(n.p,{children:["Update the cluster ",(0,c.jsx)(n.code,{children:"test"})," with 2 cpu and 12G memory."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"okctl cluster update test --cpu=2 --memory=12\n"})}),"\n",(0,c.jsx)(n.h3,{id:"tenant-management",children:"Tenant management"}),"\n",(0,c.jsxs)(n.p,{children:["Create a tenant ",(0,c.jsx)(n.code,{children:"t1"})," with same resource name in cluster ",(0,c.jsx)(n.code,{children:"test"}),"."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"okctl tenant create t1 --cluster=test --priority=z1=1\n"})}),"\n",(0,c.jsxs)(n.p,{children:["Create a empty standby tenant ",(0,c.jsx)(n.code,{children:"t1s"})," with same resource name in cluster ",(0,c.jsx)(n.code,{children:"test"}),"."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"okctl tenant create t1s --cluster=test --from=t1\n"})}),"\n",(0,c.jsxs)(n.p,{children:["Switch over roles of primary tenant ",(0,c.jsx)(n.code,{children:"t1"})," and standby tenant ",(0,c.jsx)(n.code,{children:"t1s"}),"."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"okctl tenant switchover t1 t1s\n"})}),"\n",(0,c.jsx)(n.h3,{id:"backup-policy-management",children:"Backup policy management"}),"\n",(0,c.jsxs)(n.p,{children:["Create a backup policy by NFS for tenant ",(0,c.jsx)(n.code,{children:"t1"})," in default namespace."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:'okctl backup create t1 --archive-path="t1/archive" --bak-data-path="t1/backup" --bak-encryption-password="xxxx" --inc="0 0 * * 1,2,3," --full="0 0 * * 4,5"\n'})}),"\n",(0,c.jsxs)(n.p,{children:["After creating the backup policy, you can restore ",(0,c.jsx)(n.code,{children:"t1"})," by creating a new tenant ",(0,c.jsx)(n.code,{children:"t1r"})," with the same resource name."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:'okctl tenant create t1r --cluster=test --from=t1 --restore --restore-type=nfs --archive-path="t1/archive" --bak-data-source="t1/backup" --restore-password="xxxx"  \n'})}),"\n",(0,c.jsxs)(n.p,{children:["Pause the backup policy of tenant ",(0,c.jsx)(n.code,{children:"t1"}),"."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"okctl backup pause t1\n"})}),"\n",(0,c.jsx)(n.h3,{id:"component-installation-and-update",children:"Component Installation and update"}),"\n",(0,c.jsxs)(n.p,{children:["Use okctl to install ",(0,c.jsx)(n.code,{children:"ob-operator"})," with version ",(0,c.jsx)(n.code,{children:"2.2.0"})," in cluster."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"okctl install ob-operator --version=2.2.0\n"})}),"\n",(0,c.jsxs)(n.p,{children:["Use okctl to update ",(0,c.jsx)(n.code,{children:"ob-operator"})," to the latest version."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"okctl update ob-operator\n"})}),"\n",(0,c.jsx)(n.h3,{id:"others",children:"Others"}),"\n",(0,c.jsx)(n.p,{children:"For better use experience, you can use autocomplete feature of okctl. You can run the following command to check the command for your shell, here is an example for bash."}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# After install the bash-completion package, you can run the following command to enable autocomplete feature in the current shell.\nsource <(okctl completion bash)\n"})}),"\n",(0,c.jsxs)(n.p,{children:["For more command information, you can use ",(0,c.jsx)(n.code,{children:"okctl -h"})," command to check the help information of okctl."]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>o});var c=t(6540);const a={},s=c.createContext(a);function l(e){const n=c.useContext(s);return c.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),c.createElement(s.Provider,{value:n},e.children)}}}]);