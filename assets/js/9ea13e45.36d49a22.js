"use strict";(self.webpackChunkdocsite=self.webpackChunkdocsite||[]).push([[8566],{4243:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>d});var r=n(4848),o=n(8453);const s={sidebar_position:5},i="Configure",a={id:"manual/configuration-of-ob-operator",title:"Configure",description:"This topic describes the startup parameters and environment variables of ob-operator, and the methods for modifying them. You can change the behavior of ob-operator by modifying the startup parameters and environment variables.",source:"@site/docs/manual/500.configuration-of-ob-operator.md",sourceDirName:"manual",slug:"/manual/configuration-of-ob-operator",permalink:"/ob-operator/docs/manual/configuration-of-ob-operator",draft:!1,unlisted:!1,editUrl:"https://github.com/oceanbase/ob-operator/tree/master/docsite/docs/manual/500.configuration-of-ob-operator.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"manualSidebar",previous:{title:"Upgrade",permalink:"/ob-operator/docs/manual/ob-operator-upgrade"},next:{title:"Manage resources",permalink:"/ob-operator/docs/category/manage-resources"}},l={},d=[{value:"Startup parameters",id:"startup-parameters",level:2},{value:"Environment variables",id:"environment-variables",level:2},{value:"Modify the configuration",id:"modify-the-configuration",level:2},{value:"Example: Increase the log output",id:"example-increase-the-log-output",level:3},{value:"Example: Specify a resource namespace",id:"example-specify-a-resource-namespace",level:3},{value:"Apply the modified configuration to the cluster",id:"apply-the-modified-configuration-to-the-cluster",level:3}];function c(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{id:"configure",children:"Configure"}),"\n",(0,r.jsx)(t.p,{children:"This topic describes the startup parameters and environment variables of ob-operator, and the methods for modifying them. You can change the behavior of ob-operator by modifying the startup parameters and environment variables."}),"\n",(0,r.jsx)(t.h2,{id:"startup-parameters",children:"Startup parameters"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Parameter"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Description"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Default value"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Deployment configuration"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"namespace"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"The namespace listened to by ob-operator. If you do not specify this parameter, ob-operator listens to all namespaces."}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Empty"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Empty"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"manager-namespace"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"The namespace where ob-operator runs."}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"oceanbase-system"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"oceanbase-system"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"metrics-bind-address"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"The service port that ob-operator uses to provide metrics for Prometheus."}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:":8080"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"127.0.0.1:8080"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"health-probe-bind-address"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"The service port that ob-operator uses to bind the process health probe."}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:":8081"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:":8081"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"leader-elect"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Specifies whether to elect a leader if no leader exists when ob-operator starts."}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"false"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"true"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"log-verbosity"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:["The scope of log output. ",(0,r.jsx)(t.code,{children:"0"})," specifies to output key information, ",(0,r.jsx)(t.code,{children:"1"})," specifies to output debugging information, and ",(0,r.jsx)(t.code,{children:"2"})," specifies to output traceability information."]}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"0"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"0"})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"environment-variables",children:"Environment variables"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Environment variable"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Description"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Deployment configuration"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"TELEMETRY_REPORT_HOST"}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"The data collection endpoint of telemetry."}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"https://openwebapi.oceanbase.com",children:"https://openwebapi.oceanbase.com"})})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"TELEMETRY_DEBUG"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:["Specifies whether to enable DEBUG mode of telemetry. If you set the value to ",(0,r.jsx)(t.code,{children:"true"}),", DEBUG mode is enabled."]}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Empty"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"DISABLE_WEBHOOKS"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:["Specifies whether to disable webhook verification. If you set the value to ",(0,r.jsx)(t.code,{children:"true"}),", webhook verification is disabled."]}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Empty"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"DISABLE_TELEMETRY"}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:["Specifies whether to disable the telemetry module. If you set the value to ",(0,r.jsx)(t.code,{children:"true"}),", the telemetry module is disabled. The telemetry module collects and desensitizes the cluster environment and event information, and then it sends the information to OceanBase Database. OceanBase Database uses the information to improve ob-operator."]}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Empty"})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"modify-the-configuration",children:"Modify the configuration"}),"\n",(0,r.jsxs)(t.p,{children:["Open the configuration file named ",(0,r.jsx)(t.code,{children:"operator.yaml"})," in the ",(0,r.jsx)(t.code,{children:"deploy/"})," directory and find the ",(0,r.jsx)(t.code,{children:"Deployment"})," resource named ",(0,r.jsx)(t.code,{children:"oceanbase-controller-manager"}),". Then, find the container named ",(0,r.jsx)(t.code,{children:"manager"})," in the containers list, and modify the startup parameters and environment variables. The following sample code snippet is taken from the ",(0,r.jsx)(t.code,{children:"operator.yaml"})," configuration file as an example."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",children:"      # Original configuration\n      containers:\n      - args:\n        - --health-probe-bind-address=:8081\n        - --metrics-bind-address=:8080\n        - --leader-elect\n        - --manager-namespace=oceanbase-system\n        - --log-verbosity=0\n        command:\n        - /manager\n        env:\n        - name: TELEMETRY_REPORT_HOST\n          value: https://openwebapi.oceanbase.com\n"})}),"\n",(0,r.jsx)(t.h3,{id:"example-increase-the-log-output",children:"Example: Increase the log output"}),"\n",(0,r.jsxs)(t.p,{children:["To increase the log output of ob-operator, set the ",(0,r.jsx)(t.code,{children:"log-verbosity"})," parameter to 1 or 2. The larger the value, the more logs are recorded."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",children:"      # Modified configuration\n      containers:\n      - args:\n        - --health-probe-bind-address=:8081\n        - --metrics-bind-address=:8080\n        - --leader-elect\n        - --manager-namespace=oceanbase-system\n        - --log-verbosity=2 # Set the value of log output to 2.\n        command:\n        - /manager\n        env:\n        - name: TELEMETRY_REPORT_HOST\n          value: https://openwebapi.oceanbase.com\n"})}),"\n",(0,r.jsx)(t.h3,{id:"example-specify-a-resource-namespace",children:"Example: Specify a resource namespace"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",children:"      # Modified configuration\n      containers:\n      - args:\n        - --health-probe-bind-address=:8081\n        - --metrics-bind-address=:8080\n        - --leader-elect\n        - --manager-namespace=oceanbase-system\n        - --log-verbosity=0\n        - --namespace=oceanbase # Specify that ob-operator listens only to resources in the oceanbase namespace.\n        command:\n        - /manager\n        env:\n        - name: TELEMETRY_REPORT_HOST\n          value: https://openwebapi.oceanbase.com\n"})}),"\n",(0,r.jsx)(t.h3,{id:"apply-the-modified-configuration-to-the-cluster",children:"Apply the modified configuration to the cluster"}),"\n",(0,r.jsxs)(t.p,{children:["After you modify the configuration file, you can run the ",(0,r.jsx)(t.code,{children:"kubectl apply -f deploy/operator.yaml"})," command to apply the configuration file to the cluster. You can use the same method to configure environment variables."]})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>a});var r=n(6540);const o={},s=r.createContext(o);function i(e){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(s.Provider,{value:t},e.children)}}}]);