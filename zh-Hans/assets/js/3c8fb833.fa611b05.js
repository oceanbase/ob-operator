"use strict";(self.webpackChunkdocsite=self.webpackChunkdocsite||[]).push([[3207],{5965:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>l});var r=o(4848),t=o(8453);const a={sidebar_position:1},s="\u8d44\u6e90\u7ba1\u7406",i={id:"manual/ob-operator-user-guide/tenant-management-of-ob-operator/modify-tenant-of-ob-operator/resource-management-of-ob-operator",title:"\u8d44\u6e90\u7ba1\u7406",description:"\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u901a\u8fc7 ob-operator \u8fdb\u884c\u79df\u6237\u5185\u7684\u8d44\u6e90\u5185\u5bb9\u4fee\u6539\u3002",source:"@site/i18n/zh-Hans/docusaurus-plugin-content-docs/current/manual/500.ob-operator-user-guide/200.tenant-management-of-ob-operator/200.modify-tenant-of-ob-operator/100.resource-management-of-ob-operator.md",sourceDirName:"manual/500.ob-operator-user-guide/200.tenant-management-of-ob-operator/200.modify-tenant-of-ob-operator",slug:"/manual/ob-operator-user-guide/tenant-management-of-ob-operator/modify-tenant-of-ob-operator/resource-management-of-ob-operator",permalink:"/ob-operator/zh-Hans/docs/manual/ob-operator-user-guide/tenant-management-of-ob-operator/modify-tenant-of-ob-operator/resource-management-of-ob-operator",draft:!1,unlisted:!1,editUrl:"https://github.com/oceanbase/ob-operator/tree/master/docsite/docs/manual/500.ob-operator-user-guide/200.tenant-management-of-ob-operator/200.modify-tenant-of-ob-operator/100.resource-management-of-ob-operator.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"manualSidebar",previous:{title:"Modify tenant",permalink:"/ob-operator/zh-Hans/docs/category/modify-tenant"},next:{title:"\u526f\u672c\u7ba1\u7406",permalink:"/ob-operator/zh-Hans/docs/manual/ob-operator-user-guide/tenant-management-of-ob-operator/modify-tenant-of-ob-operator/replica-management-of-ob-operator"}},c={},l=[{value:"\u4fee\u6539\u8d44\u6e90\u89c4\u683c",id:"\u4fee\u6539\u8d44\u6e90\u89c4\u683c",level:2},{value:"\u64cd\u4f5c\u6b65\u9aa4",id:"\u64cd\u4f5c\u6b65\u9aa4",level:3},{value:"\u4fee\u6539\u8d44\u6e90\u6c60 unit num",id:"\u4fee\u6539\u8d44\u6e90\u6c60-unit-num",level:2},{value:"\u64cd\u4f5c\u6b65\u9aa4",id:"\u64cd\u4f5c\u6b65\u9aa4-1",level:3}];function m(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"\u8d44\u6e90\u7ba1\u7406",children:"\u8d44\u6e90\u7ba1\u7406"}),"\n",(0,r.jsx)(n.p,{children:"\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u901a\u8fc7 ob-operator \u8fdb\u884c\u79df\u6237\u5185\u7684\u8d44\u6e90\u5185\u5bb9\u4fee\u6539\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u79df\u6237\u8d44\u6e90\u5185\u5bb9\u5206\u4e3a\u79df\u6237\u8d44\u6e90\u89c4\u683c\u548c\u79df\u6237\u8d44\u6e90\u6c60\uff0c\u4fee\u6539\u79df\u6237\u8d44\u6e90\u89c4\u683c\u548c\u8d44\u6e90\u6c60\uff0c\u53ef\u4ee5\u5b9e\u73b0\u5bf9\u79df\u6237\u7684\u6269\u7f29\u5bb9\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"\u4fee\u6539\u8d44\u6e90\u89c4\u683c",children:"\u4fee\u6539\u8d44\u6e90\u89c4\u683c"}),"\n",(0,r.jsx)(n.p,{children:"\u4fee\u6539\u8d44\u6e90\u89c4\u683c\u5373\u662f\u8c03\u5927\u6216\u8c03\u5c0f\u8d44\u6e90\u5355\u5143\u914d\u7f6e\u4e2d\u7684 CPU\u3001\u5185\u5b58t\u548c\u65e5\u5fd7\u76d8\u5bb9\u91cf\u3002"}),"\n",(0,r.jsxs)(n.p,{children:["\u4fee\u6539\u8d44\u6e90\u89c4\u683c\u7684\u6ce8\u610f\u4e8b\u9879\uff0c\u53c2\u8003 ",(0,r.jsx)(n.a,{href:"https://www.oceanbase.com/docs/common-oceanbase-database-cn-1000000000218787",children:"\u4fee\u6539\u8d44\u6e90\u89c4\u683c\u914d\u7f6e"})," \u5185\u7684\u6ce8\u610f\u4e8b\u9879\u3002"]}),"\n",(0,r.jsx)(n.h3,{id:"\u64cd\u4f5c\u6b65\u9aa4",children:"\u64cd\u4f5c\u6b65\u9aa4"}),"\n",(0,r.jsx)(n.p,{children:"\u4fee\u6539\u8d44\u6e90\u89c4\u683c\u65f6\uff0c\u901a\u8fc7\u5e94\u7528\u79df\u6237\u914d\u7f6e\u6587\u4ef6 tenant.yaml \u4e2d resource \u4e0b\u7684\u914d\u7f6e\u9879\u4ece\u800c\u4fee\u6539\u5728\u8be5 zone \u4e0b\u7684 resource unit \u7684\u89c4\u683c\u3002\u5177\u4f53\u5982\u4e0b\uff1a"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u4fee\u6539\u79df\u6237\u914d\u7f6e\u6587\u4ef6 tenant.yaml\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"#\u793a\u4f8b\uff1a\u4fee\u6539\u524d maxCPU \u4e3a 1\n  resource:\n    maxCPU: 1\n    memorySize: 1Gi\n\n#\u4fee\u6539\u540e\uff0cmaxCPU \u7531 1 \u53d8\u4e3a 2\n  resource:\n    maxCPU: 2 #1 -> 2\n    memorySize: 1Gi\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u540e\uff0c\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u4f7f\u6539\u52a8\u751f\u6548\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"kubectl apply -f tenant.yaml\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u6267\u884c\u4ee5\u4e0b\u8bed\u53e5\uff0c\u67e5\u770b\u5f53\u524d Kubernetes \u96c6\u7fa4\u4e2d\u79df\u6237\u7684 OBTenant \u8d44\u6e90\uff0c\u6765\u5224\u65ad\u662f\u5426\u4fee\u6539\u6210\u529f\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"kubectl get obtenants.oceanbase.oceanbase.com -n oceanbase -o yaml\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\u5f53\u770b\u5230\u79df\u6237\u7684 OBTenant \u8d44\u6e90\u4e2d ",(0,r.jsx)(n.code,{children:"status.pools.resource"})," \u5bf9\u5e94\u7684\u503c\u53d8\u4e3a\u4fee\u6539\u540e\u7684\u503c\uff0c\u5219\u8bf4\u660e\u4fee\u6539\u6210\u529f\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'  status:\n    ......\n    resourcePool:\n    - priority: 1\n      type:\n        isActive: true\n        name: FULL\n        replica: 1\n      unitConfig:\n        iopsWeight: 2\n        logDiskSize: "12884901888"\n        maxCPU: "2" # maxCPU \u5df2\u4fee\u6539\u4e3a 2\n        maxIops: 1024\n        memorySize: "5368709120"\n        minCPU: "1"\n        minIops: 1024\n      unitNum: 1\n      units:\n      - migrate:\n          serverIP: ""\n          serverPort: 0\n        serverIP: xxx.xxx.xxx.xxx\n        serverPort: 2882\n        status: ACTIVE\n        unitId: 1006\n      zoneList: zone1\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u4fee\u6539\u8d44\u6e90\u6c60-unit-num",children:"\u4fee\u6539\u8d44\u6e90\u6c60 unit num"}),"\n",(0,r.jsxs)(n.p,{children:["\u5728\u589e\u52a0\u8d44\u6e90\u6c60 unit num \u524d\u9700\u8981\u4fdd\u8bc1\u5bf9\u5e94\u7684 Zone \u5185\u6709\u8db3\u591f\u7684 OBServer \u8282\u70b9\uff0c\u5982\u4f55\u5728 zone \u5185\u6dfb\u52a0 OBServer \u8282\u70b9\u53ef\u53c2\u8003 ",(0,r.jsx)(n.a,{href:"https://www.oceanbase.com/docs/common-oceanbase-database-cn-1000000000221562",children:"\u5411 Zone \u5185\u6dfb\u52a0 OBServer \u8282\u70b9"}),"\u3002"]}),"\n",(0,r.jsx)(n.h3,{id:"\u64cd\u4f5c\u6b65\u9aa4-1",children:"\u64cd\u4f5c\u6b65\u9aa4"}),"\n",(0,r.jsx)(n.p,{children:"\u4fee\u6539\u8d44\u6e90\u6c60 unit num \u65f6\uff0c\u901a\u8fc7\u5e94\u7528\u79df\u6237\u914d\u7f6e\u6587\u4ef6 tenant.yaml \u4e2d pools \u4e0b\u6bcf\u4e2a Zone \u5bf9\u5e94\u7684 unitNum\u3002\u5177\u4f53\u5982\u4e0b\uff1a"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 ",(0,r.jsx)(n.code,{children:"tenant.yaml"}),"\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"#\u793a\u4f8b\uff1a\u5c06\u79df\u6237\u5728\u6bcf\u4e2a zone \u4e0a\u7684\u8d44\u6e90\u5355\u5143\u4e2a\u6570\u4e3a\u8c03\u6574 2 \u4e2a\nspec:\n  unitNum: 1\n\n#\u8c03\u6574\u540e UnitNum \u4e3a 2\nspec:\n  unitNum: 2\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u540e\uff0c\u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u4f7f\u6539\u52a8\u751f\u6548\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"kubectl apply -f tenant.yaml\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u6267\u884c\u4ee5\u4e0b\u8bed\u53e5\uff0c\u67e5\u770b\u5f53\u524d Kubernetes \u96c6\u7fa4\u4e2d\u79df\u6237\u7684 OBTenant \u8d44\u6e90\uff0c\u6765\u5224\u65ad\u662f\u5426\u4fee\u6539\u6210\u529f\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"kubectl get obtenants.oceanbase.oceanbase.com -n oceanbase -o yaml\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\u5f53\u770b\u5230\u79df\u6237\u7684 OBTenant \u8d44\u6e90\u4e2d ",(0,r.jsx)(n.code,{children:"status.resourcePool.unitNum"})," \u5bf9\u5e94\u7684\u503c\u53d8\u4e3a\u4fee\u6539\u540e\u7684\u503c\uff0c\u5219\u8bf4\u660e\u4fee\u6539\u6210\u529f\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'  status:\n    ......\n    resourcePool:\n    - priority: 1\n      type:\n        isActive: true\n        name: FULL\n        replica: 1\n      unitConfig:\n        iopsWeight: 2\n        logDiskSize: "12884901888"\n        maxCPU: "1"\n        maxIops: 1024\n        memorySize: "5368709120"\n        minCPU: "1"\n        minIops: 1024\n      unitNum: 2 # unitNum \u5df2\u4fee\u6539\u4e3a 2\n      units:\n      - migrate:\n          serverIP: ""\n          serverPort: 0\n        serverIP: 10.42.0.189\n        serverPort: 2882\n        status: ACTIVE\n        unitId: 1006\n      zoneList: zone1\n'})})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>s,x:()=>i});var r=o(6540);const t={},a=r.createContext(t);function s(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);