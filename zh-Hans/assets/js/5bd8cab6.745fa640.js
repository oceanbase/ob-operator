"use strict";(self.webpackChunkdocsite=self.webpackChunkdocsite||[]).push([[3362],{6457:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>o,default:()=>p,frontMatter:()=>c,metadata:()=>l,toc:()=>i});var a=s(4848),r=s(8453);const c={sidebar_position:1},o="OceanBase \u4ee5\u53ca\u5e94\u7528\u5728 K8s \u4e2d\u90e8\u7f72\u7684\u793a\u4f8b",l={id:"manual/appendix/example",title:"OceanBase \u4ee5\u53ca\u5e94\u7528\u5728 K8s \u4e2d\u90e8\u7f72\u7684\u793a\u4f8b",description:"\u672c\u6587\u4ecb\u7ecd\u5728\u5b9e\u9645\u73af\u5883\u4e2d OceanBase \u548c\u5e94\u7528\u7a0b\u5e8f\u5728 K8s \u4e2d\u90e8\u7f72\u7684\u5178\u578b\u67b6\u6784\uff0c\u901a\u8fc7\u771f\u5b9e\u793a\u4f8b\u5c55\u793a\u5982\u4f55\u5728 K8s \u4e2d\u90e8\u7f72 OceanBase \u548c\u76f8\u5173\u7ec4\u4ef6\u4ee5\u53ca\u5e94\u7528\u7a0b\u5e8f\u3002",source:"@site/i18n/zh-Hans/docusaurus-plugin-content-docs/current/manual/900.appendix/100.example.md",sourceDirName:"manual/900.appendix",slug:"/manual/appendix/example",permalink:"/ob-operator/zh-Hans/docs/manual/appendix/example",draft:!1,unlisted:!1,editUrl:"https://github.com/oceanbase/ob-operator/tree/master/docsite/docs/manual/900.appendix/100.example.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"manualSidebar",previous:{title:"Appendix",permalink:"/ob-operator/zh-Hans/docs/category/appendix"},next:{title:"FAQ",permalink:"/ob-operator/zh-Hans/docs/manual/appendix/FAQ"}},t={},i=[{value:"\u524d\u63d0\u6761\u4ef6",id:"\u524d\u63d0\u6761\u4ef6",level:2},{value:"\u90e8\u7f72 OceanBase \u4ee5\u53ca\u76f8\u5173\u7ec4\u4ef6",id:"\u90e8\u7f72-oceanbase-\u4ee5\u53ca\u76f8\u5173\u7ec4\u4ef6",level:2},{value:"\u90e8\u7f72\u524d\u51c6\u5907",id:"\u90e8\u7f72\u524d\u51c6\u5907",level:3},{value:"\u90e8\u7f72 ob-configserver",id:"\u90e8\u7f72-ob-configserver",level:3},{value:"\u90e8\u7f72 OceanBase \u96c6\u7fa4",id:"\u90e8\u7f72-oceanbase-\u96c6\u7fa4",level:3},{value:"\u90e8\u7f72 ObProxy",id:"\u90e8\u7f72-obproxy",level:3},{value:"\u90e8\u7f72\u5e94\u7528",id:"\u90e8\u7f72\u5e94\u7528",level:2},{value:"\u521b\u5efa\u79df\u6237",id:"\u521b\u5efa\u79df\u6237",level:3},{value:"\u90e8\u7f72\u5e94\u7528\u7a0b\u5e8f",id:"\u90e8\u7f72\u5e94\u7528\u7a0b\u5e8f",level:3},{value:"\u90e8\u7f72\u76d1\u63a7\u7cfb\u7edf",id:"\u90e8\u7f72\u76d1\u63a7\u7cfb\u7edf",level:2},{value:"\u90e8\u7f72 prometheus",id:"\u90e8\u7f72-prometheus",level:3},{value:"\u90e8\u7f72 grafana",id:"\u90e8\u7f72-grafana",level:3},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2},{value:"\u8bf4\u660e",id:"\u8bf4\u660e",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"oceanbase-\u4ee5\u53ca\u5e94\u7528\u5728-k8s-\u4e2d\u90e8\u7f72\u7684\u793a\u4f8b",children:"OceanBase \u4ee5\u53ca\u5e94\u7528\u5728 K8s \u4e2d\u90e8\u7f72\u7684\u793a\u4f8b"}),"\n",(0,a.jsx)(n.p,{children:"\u672c\u6587\u4ecb\u7ecd\u5728\u5b9e\u9645\u73af\u5883\u4e2d OceanBase \u548c\u5e94\u7528\u7a0b\u5e8f\u5728 K8s \u4e2d\u90e8\u7f72\u7684\u5178\u578b\u67b6\u6784\uff0c\u901a\u8fc7\u771f\u5b9e\u793a\u4f8b\u5c55\u793a\u5982\u4f55\u5728 K8s \u4e2d\u90e8\u7f72 OceanBase \u548c\u76f8\u5173\u7ec4\u4ef6\u4ee5\u53ca\u5e94\u7528\u7a0b\u5e8f\u3002"}),"\n",(0,a.jsx)(n.h2,{id:"\u524d\u63d0\u6761\u4ef6",children:"\u524d\u63d0\u6761\u4ef6"}),"\n",(0,a.jsxs)(n.p,{children:["\u5728\u60a8\u5f00\u59cb\u4e4b\u524d\uff0c\u786e\u4fdd\u60a8\u5df2\u7ecf\u5728 k8s \u96c6\u7fa4\u5f53\u4e2d\u90e8\u7f72\u4e86\uff0c",(0,a.jsx)(n.a,{href:"https://cert-manager.io/docs/",children:"cert-manager"})," \u3001",(0,a.jsx)(n.a,{href:"https://github.com/rancher/local-path-provisioner",children:"local-path-provisioner"})," \u548c ",(0,a.jsx)(n.a,{href:"https://github.com/oceanbase/ob-operator",children:"ob-operator"}),"\u3002"]}),"\n",(0,a.jsx)(n.p,{children:"\u672c\u6587\u6d89\u53ca\u4ee5\u4e0b\u7ec4\u4ef6\uff1a"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://github.com/oceanbase/oceanbase",children:"OceanBase Database"}),"\uff0cOceanBase \u6570\u636e\u5e93\u3002"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://github.com/oceanbase/oceanbase/tree/master/tools/ob-configserver",children:"ob-configserver"}),"\uff0c\u7528\u4e8e\u6ce8\u518c OceanBase \u6570\u636e\u5e93\u7684 rootservice \u5730\u5740\u4fe1\u606f\u3002"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://github.com/oceanbase/obproxy",children:"Oceanbase Database Proxy (ODP)"}),"\uff0cOceanBase \u6570\u636e\u5e93\u4ee3\u7406\u7a0b\u5e8f\u3002"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://github.com/oceanbase/ob-operator/tree/master/distribution/oceanbase-todo",children:"OceanBase Todo List"}),"\u3002\u4e00\u4e2a\u8f83\u4e3a\u7b80\u5355\u7684 web \u5e94\u7528\u7a0b\u5e8f\uff0c\u7528\u4e8e\u6f14\u793a\u5982\u4f55\u5728 Kubernetes \u96c6\u7fa4\u4e2d\u90e8\u7f72 web \u5e94\u7528\u7a0b\u5e8f\u5e76\u4f7f\u7528 OceanBase \u96c6\u7fa4\u4f5c\u4e3a\u540e\u7aef\u6570\u636e\u5e93\u3002"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://prometheus.io/",children:"Prometheus"}),"\uff0c\u76d1\u63a7\u544a\u8b66\u7cfb\u7edf\uff0c\u901a\u8fc7 Prometheus \u91c7\u96c6\u548c\u8ba1\u7b97 OceanBase \u76d1\u63a7\u6307\u6807\u3002"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://grafana.com/",children:"Grafana"}),"\uff0c\u6570\u636e\u53ef\u89c6\u5316\u7cfb\u7edf\u3002\u4e0e Prometheus \u5bf9\u63a5\u53ef\u4ee5\u53ef\u89c6\u5316\u5c55\u793a OceanBase \u7684\u76d1\u63a7\u6570\u636e\u3002"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"\u90e8\u7f72-oceanbase-\u4ee5\u53ca\u76f8\u5173\u7ec4\u4ef6",children:"\u90e8\u7f72 OceanBase \u4ee5\u53ca\u76f8\u5173\u7ec4\u4ef6"}),"\n",(0,a.jsx)(n.h3,{id:"\u90e8\u7f72\u524d\u51c6\u5907",children:"\u90e8\u7f72\u524d\u51c6\u5907"}),"\n",(0,a.jsx)(n.p,{children:"\u521b\u5efa namespace\u3002"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"kubectl apply -f https://raw.githubusercontent.com/oceanbase/ob-operator/2.2.1_release/example/webapp/namespace.yaml\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u67e5\u770b\u521b\u5efa\u7684 namespace\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"kubectl get namespace oceanbase\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u8f93\u51fa\u5982\u4e0b\u7ed3\u679c\u8868\u793a\u521b\u5efa\u6210\u529f\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"NAME        STATUS   AGE\noceanbase   Active   98s\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u521b\u5efa\u96c6\u7fa4\u548c\u79df\u6237\u7684 secret\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"kubectl apply -f https://raw.githubusercontent.com/oceanbase/ob-operator/2.2.1_release/example/webapp/secret.yaml\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u67e5\u770b\u521b\u5efa\u7684 secret\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"kubectl get secret -n oceanbase\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u8f93\u51fa\u5982\u4e0b\u7ed3\u679c\u8868\u793a\u521b\u5efa\u6210\u529f\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"NAME                      TYPE                                  DATA   AGE\nsc-metatenant-root        Opaque                                1      11s\nsc-metatenant-standbyro   Opaque                                1      11s\nsc-sys-monitor            Opaque                                1      11s\nsc-sys-operator           Opaque                                1      11s\nsc-sys-proxyro            Opaque                                1      11s\nsc-sys-root               Opaque                                1      11s\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u90e8\u7f72-ob-configserver",children:"\u90e8\u7f72 ob-configserver"}),"\n",(0,a.jsx)(n.p,{children:"ob-configserver \u662f\u63d0\u4f9b OceanBase rootservice \u4fe1\u606f\u6ce8\u518c\u548c\u67e5\u8be2\u7684\u670d\u52a1\uff0c\u5143\u6570\u636e\u5b58\u50a8\u652f\u6301 MySQL \u548c Sqlite3\u3002\u8fd9\u91cc\u4e3a\u4e86\u7b80\u5355\u4f7f\u7528\u4e86 Sqlite3\u3002\n\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u90e8\u7f72 ob-configserver \u4ee5\u53ca\u521b\u5efa\u5bf9\u5e94\u7684 service\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"kubectl apply -f https://raw.githubusercontent.com/oceanbase/ob-operator/2.2.1_release/example/webapp/configserver.yaml\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u68c0\u67e5 pod \u72b6\u6001\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"kubectl get pods -n oceanbase | grep ob-configserver\n\n# desired output\nob-configserver-856bf5d865-dlwxr   1/1     Running   0          16s\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u68c0\u67e5 svc \u72b6\u6001\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"kubectl get svc svc-ob-configserver -n oceanbase\n\n# desired output\nNAME                  TYPE       CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE\nsvc-ob-configserver   NodePort   10.96.3.39   <none>        8080:30080/TCP   98s\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u90e8\u7f72-oceanbase-\u96c6\u7fa4",children:"\u90e8\u7f72 OceanBase \u96c6\u7fa4"}),"\n",(0,a.jsx)(n.p,{children:"\u90e8\u7f72 OceanBase \u96c6\u7fa4\u65f6\u589e\u52a0\u73af\u5883\u53d8\u91cf\uff0c\u4f7f\u7528 ob-configserver \u7684\u670d\u52a1\u5730\u5740\u4f5c\u4e3a\u7cfb\u7edf\u53c2\u6570 obconfig_url \u7684\u503c\uff0cOceanBase \u4f1a\u5c06 rootservice \u4fe1\u606f\u6ce8\u518c\u5230 ob-configserver \u4e2d\u3002\n\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u90e8\u7f72 OceanBase \u96c6\u7fa4\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"kubectl apply -f https://raw.githubusercontent.com/oceanbase/ob-operator/2.2.1_release/example/webapp/obcluster.yaml\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u8f6e\u8be2\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u68c0\u67e5 obcluster \u72b6\u6001\uff0c\u76f4\u5230\u96c6\u7fa4\u53d8\u6210 running \u72b6\u6001\u3002"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"kubectl get obclusters.oceanbase.oceanbase.com metadb -n oceanbase\n\n# desired output\nNAME     STATUS    AGE\nmetadb   running   3m21s\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u90e8\u7f72-obproxy",children:"\u90e8\u7f72 ObProxy"}),"\n",(0,a.jsx)(n.p,{children:"ObProxy \u652f\u6301\u4f7f\u7528 ob-configserver \u6216\u8005\u76f4\u63a5\u6307\u5b9a rs_list \u7684\u5f62\u5f0f\u542f\u52a8\uff0c\u4e3a\u4e86\u80fd\u5145\u5206\u5229\u7528 obproxy \u7684\u80fd\u529b\uff0c\u63a8\u8350\u4f7f\u7528 ob-configserver \u7684\u5f62\u5f0f\u8fde\u63a5\u96c6\u7fa4"}),"\n",(0,a.jsx)(n.p,{children:"\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u90e8\u7f72 ObProxy \u4ee5\u53ca\u521b\u5efa service\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"kubectl apply -f https://raw.githubusercontent.com/oceanbase/ob-operator/2.2.1_release/example/webapp/obproxy.yaml\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u67e5\u770b ObProxy \u7684 pod \u72b6\u6001\uff0c\u4f1a\u6709\u4e24\u4e2a obproxy \u7684 pod\u3002"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"kubectl get pod -A | grep obproxy\n\n# desired output\noceanbase            obproxy-5cb8f4d975-pmr59                          1/1     Running   0          21s\noceanbase            obproxy-5cb8f4d975-xlvjp                          1/1     Running   0          21s\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u67e5\u770b ObProxy \u7684 service\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"kubectl get svc svc-obproxy -n oceanbase\n\n# desired output\nNAME          TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)             AGE\nsvc-obproxy   ClusterIP   10.96.2.46   <none>        2883/TCP,2884/TCP   2m26s\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u901a\u8fc7 ObProxy \u670d\u52a1\u5730\u5740\u8fde\u63a5 OceanBase \u96c6\u7fa4\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"mysql -h${obproxy-service-address} -P2883 -uroot@sys#metadb -p\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u8fde\u63a5\u6210\u529f\u8868\u793a obproxy \u670d\u52a1\u6b63\u5e38\uff1a"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer/V4.2.0/ob-operator-1.png",alt:"connection"})}),"\n",(0,a.jsxs)(n.p,{children:["\u5982\u679c\u63d0\u793a ",(0,a.jsx)(n.code,{children:"cluster not exist"})," \u8868\u793a OceanBase \u96c6\u7fa4\u5c1a\u672a\u628a\u96c6\u7fa4\u5143\u4fe1\u606f\u6ce8\u518c\u5230 ob-configserver\uff0c\u8bf7\u7a0d\u4f5c\u7b49\u5f85\u540e\u91cd\u8bd5\u8fde\u63a5\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 ",(0,a.jsx)(n.code,{children:'curl "http://127.0.0.1:30080/services?Action=ObRootServiceInfo&ObCluster=metadb"'})," \u67e5\u770b\u6ce8\u518c\u7ed3\u679c\u3002\u5982\u679c\u8fd4\u56de\u7684\u7ed3\u679c RsList \u53c2\u6570\u4e0d\u4e3a\u7a7a\uff0c\u8bf4\u660e\u5df2\u7ecf\u6ce8\u518c\u5b8c\u6210\u3002"]}),"\n",(0,a.jsx)(n.h2,{id:"\u90e8\u7f72\u5e94\u7528",children:"\u90e8\u7f72\u5e94\u7528"}),"\n",(0,a.jsx)(n.h3,{id:"\u521b\u5efa\u79df\u6237",children:"\u521b\u5efa\u79df\u6237"}),"\n",(0,a.jsx)(n.p,{children:"\u4e3a\u4e1a\u52a1\u5355\u72ec\u521b\u5efa\u4e00\u4e2a\u79df\u6237\uff0c\u53ef\u4ee5\u66f4\u597d\u7684\u505a\u5230\u8d44\u6e90\u7684\u9694\u79bb\uff0c\u672c\u6587\u4e2d\u4e3a\u4e86\u7b80\u5355\uff0c\u4ec5\u521b\u5efa\u4e00\u4e2a\u79df\u6237\u3002"}),"\n",(0,a.jsx)(n.p,{children:"\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u521b\u5efa\u79df\u6237\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"kubectl apply -f https://raw.githubusercontent.com/oceanbase/ob-operator/2.2.1_release/example/webapp/tenant.yaml\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u521b\u5efa\u540e\u8f6e\u8be2\u79df\u6237\u7684\u8d44\u6e90\u72b6\u6001, \u5f53\u53d8\u6210 running \u65f6\u8868\u793a\u79df\u6237\u4ee5\u53ca\u521b\u5efa\u5b8c\u6210\u4e86"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"kubectl get obtenants.oceanbase.oceanbase.com metatenant -n oceanbase\nNAME         STATUS    TENANTNAME   TENANTROLE   CLUSTERNAME   AGE\nmetatenant   running   metatenant   PRIMARY      metadb        106s\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u8fde\u63a5\u79df\u6237\u8fdb\u884c\u9a8c\u8bc1\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"mysql -h${obproxy-service-address} -P2883 -uroot@metatenant#metadb -p\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u8fde\u63a5\u6210\u529f\u8868\u793a\u79df\u6237\u53ef\u4ee5\u6b63\u5e38\u4f7f\u7528\u3002"}),"\n",(0,a.jsx)(n.h3,{id:"\u90e8\u7f72\u5e94\u7528\u7a0b\u5e8f",children:"\u90e8\u7f72\u5e94\u7528\u7a0b\u5e8f"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.a,{href:"https://github.com/oceanbase/ob-operator/tree/master/distribution/oceanbase-todo",children:"OceanBase Todo List"}),"\u3002\u4e00\u4e2a\u8f83\u4e3a\u7b80\u5355\u7684 web \u5e94\u7528\u7a0b\u5e8f\uff0c\u7528\u4e8e\u6f14\u793a\u5982\u4f55\u5728 Kubernetes \u96c6\u7fa4\u4e2d\u90e8\u7f72 web \u5e94\u7528\u7a0b\u5e8f\u5e76\u4f7f\u7528 OceanBase \u96c6\u7fa4\u4f5c\u4e3a\u540e\u7aef\u6570\u636e\u5e93\u3002"]}),"\n",(0,a.jsx)(n.p,{children:"\u5728\u542f\u52a8\u5e94\u7528\u4e4b\u524d\uff0c\u9996\u5148\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u521b\u5efa database\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"# Connect to the tenant\nmysql -h${obproxy-service-address} -P2883 -uroot@metatenant#metadb -p\n\n# Create dev database\ncreate database dev;\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u90e8\u7f72\u5e94\u7528\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"kubectl apply -f https://raw.githubusercontent.com/oceanbase/ob-operator/2.2.1_release/example/webapp/oceanbase-todo.yaml\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u90e8\u7f72\u6210\u529f\u4e4b\u540e\uff0c\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\u8fdb\u884c\u67e5\u770b\u90e8\u7f72\u7684\u72b6\u6001\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"# Check the pod\nkubectl get pods -n oceanbase | grep oceanbase-todo\noceanbase-todo-746c7ff78f-49dxv       1/1     Running   0             12m\noceanbase-todo-746c7ff78f-4875t       1/1     Running   0             12m\n\n# Check service\nkubectl get svc svc-oceanbase-todo -n oceanbase\nNAME                  TYPE       CLUSTER-IP     EXTERNAL-IP   PORT(S)           AGE\nsvc-oceanbase-todo    NodePort   10.43.39.231   <none>        20031:32080/TCP   12m\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u90e8\u7f72\u6210\u529f\u4e4b\u540e\u9700\u8981\u4e00\u6bb5\u65f6\u95f4\u624d\u53ef\u4ee5\u6b63\u5e38\u63d0\u4f9b\u670d\u52a1\uff0c\u53ef\u4ee5\u901a\u8fc7\u670d\u52a1\u5730\u5740\u8fdb\u884c\u8bbf\u95ee\u3002"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:'# Check service with the following command:\ncurl \'http://${service_ip}:${service_port}\'\n\n# Take Cluster IP 10.43.39.231 as an example\n$ curl http://10.43.39.231:20031\n# Desired output is as follows:\n<!doctype html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <link rel="icon" type="image/png" href="/logo.png" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>OceanBase Todo List</title>\n    <script type="module" crossorigin src="/assets/index-DHbyEFSo.js"><\/script>\n    <link rel="stylesheet" crossorigin href="/assets/index-B8po_uIp.css">\n  </head>\n  <body>\n    <div id="root"></div>\n  </body>\n</html>\n'})}),"\n",(0,a.jsxs)(n.p,{children:["\u5982\u679c\u60a8\u60f3\u4ece\u4e92\u8054\u7f51\u8bbf\u95ee\u5e94\u7528\u7a0b\u5e8f\uff0c\u53ef\u4ee5\u4f7f\u7528 NodePort \u7c7b\u578b\u7684\u670d\u52a1\u5c06\u5e94\u7528\u7684\u7aef\u53e3\u66b4\u9732\u5728 K8s \u8282\u70b9\u7684\u67d0\u7aef\u53e3\u4e0a\u7ed9\u5916\u754c\u8bbf\u95ee\u3002\u5728\u672c\u4f8b\u4e2d NodePort \u4e3a ",(0,a.jsx)(n.code,{children:"32080"}),"\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7\u5730\u5740 ",(0,a.jsx)(n.code,{children:"http://${node_ip}:32080"})," \u8bbf\u95ee\u5e94\u7528\u7a0b\u5e8f\u3002"]}),"\n",(0,a.jsx)(n.h2,{id:"\u90e8\u7f72\u76d1\u63a7\u7cfb\u7edf",children:"\u90e8\u7f72\u76d1\u63a7\u7cfb\u7edf"}),"\n",(0,a.jsx)(n.h3,{id:"\u90e8\u7f72-prometheus",children:"\u90e8\u7f72 prometheus"}),"\n",(0,a.jsx)(n.p,{children:"\u90e8\u7f72 OceanBase \u96c6\u7fa4\u7684\u540c\u65f6\uff0c\u5728\u6bcf\u4e2a pod \u4e2d\u521b\u5efa\u4e86 obagent \u7684 sidecar \u5bb9\u5668\uff0c\u53ef\u4ee5\u63d0\u4f9b prometheus \u534f\u8bae\u7684\u76d1\u63a7\u6570\u636e\uff0c\u540c\u65f6\u4e5f\u521b\u5efa\u4e86\u4e00\u4e2a service\uff0c\u914d\u5408\u670d\u52a1\u53d1\u73b0\uff0c\u53ef\u4ee5\u505a\u5230\u81ea\u52a8\u8bc6\u522b obagent \u7684\u5730\u5740\u53bb\u91c7\u96c6\u6570\u636e\u3002"}),"\n",(0,a.jsx)(n.p,{children:"\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u90e8\u7f72 prometheus\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"kubectl apply -f https://raw.githubusercontent.com/oceanbase/ob-operator/2.2.1_release/example/webapp/prometheus.yaml\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u67e5\u770b\u90e8\u7f72\u72b6\u6001\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"# check pod status\nkubectl get pods -n oceanbase | grep prometheus\nprometheus-576d7757b9-jsvfh        1/1     Running   0          3m17s\n\n# check service status\nkubectl get svc svc-prometheus -n oceanbase\nNAME             TYPE       CLUSTER-IP    EXTERNAL-IP   PORT(S)          AGE\nsvc-prometheus   NodePort   10.96.1.212   <none>        9090:30090/TCP   3m45s\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u90e8\u7f72-grafana",children:"\u90e8\u7f72 grafana"}),"\n",(0,a.jsx)(n.p,{children:"grafana \u53ef\u4ee5\u4f7f\u7528 prometheus \u4f5c\u4e3a\u6570\u636e\u6e90\uff0c\u8fdb\u884c OceanBase \u6307\u6807\u7684\u5c55\u793a\u3002\n\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u90e8\u7f72 grafana\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"kubectl apply -f https://raw.githubusercontent.com/oceanbase/ob-operator/2.2.1_release/example/webapp/grafana.yaml\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u67e5\u770b\u90e8\u7f72\u72b6\u6001\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"# check pod status\nkubectl get pods -n oceanbase | grep grafana\ngrafana-b7c6c6ccb-dkv57            1/1     Running   0          2m\n\n# check service status\nkubectl get svc svc-grafana -n oceanbase\nNAME          TYPE       CLUSTER-IP    EXTERNAL-IP   PORT(S)          AGE\nsvc-grafana   NodePort   10.96.2.145   <none>        3000:30030/TCP   2m\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u6253\u5f00\u6d4f\u89c8\u5668\u8bbf\u95ee\u670d\u52a1\u5730\u5740\uff0c\u67e5\u770b OceanBase \u7684\u76d1\u63a7\u6307\u6807\uff1a"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer/V4.2.0/ob-operator-2.png",alt:"grafana"})}),"\n",(0,a.jsx)(n.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,a.jsx)(n.p,{children:"\u672c\u6587\u4ecb\u7ecd\u4e86\u5178\u578b\u7684 OceanBase \u90e8\u7f72\u6a21\u5f0f\uff0c\u5305\u62ec OceanBase \u53ca\u76f8\u5173\u7ec4\u4ef6\uff08oceanbase\u3001obproxy \u548c  ob-configserver\uff09\uff0c\u5e94\u7528\u4ee5\u53ca\u76d1\u63a7\u7cfb\u7edf\u7684\u90e8\u7f72\uff0c\u5176\u4ed6\u5e94\u7528\u7684\u90e8\u7f72\u53ef\u4ee5\u4ee5\u6b64\u6587\u6863\u4f5c\u4e3a\u53c2\u8003\u3002"}),"\n",(0,a.jsx)(n.h2,{id:"\u8bf4\u660e",children:"\u8bf4\u660e"}),"\n",(0,a.jsxs)(n.p,{children:["\u672c\u6587\u4e2d\u7684\u914d\u7f6e\u6587\u4ef6\u5747\u53ef\u5728 ",(0,a.jsx)(n.a,{href:"https://github.com/oceanbase/ob-operator/tree/2.2.1_release/example/webapp",children:"webapp \u914d\u7f6e\u6587\u4ef6"})," \u76ee\u5f55\u4e2d\u627e\u5230\u3002"]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>l});var a=s(6540);const r={},c=a.createContext(r);function o(e){const n=a.useContext(c);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),a.createElement(c.Provider,{value:n},e.children)}}}]);